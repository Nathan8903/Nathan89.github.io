<html>
    <head>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js"></script>
        <script src="p5.collide2d.js"></script>
    </head>
    <body>
        <h1>Stay alive for <span id="time">01:00</span> to win!! </h1>
        <style>
            body {
                margin:0;
                padding:0;
                overflow:hidden ;
            }
        </style>
        <script>
            var w = window.innerWidth;
            var h = window.innerHeight;
            var x = w/2;
            var y = h/2;
            var bdg = badguy;
            var bdg1 = badguy1;
            var player;
            var player1;
            var timer = 0;
            var timer1 = 0;
            var hit = false;
            var hit1 = false;
            function setup(){
               createCanvas(w,h);
               frameRate(144);
               badguy = new badguy();
               badguy1 = new badguy1();
               player = new player();
               player1 = new player1();
            }
            function draw(){
                clear();
                noStroke();
                badguy.show();
                badguy.update();
                badguy1.show();
                badguy1.update();
                player.show();
                player.update();
                player1.show();
                player1.update();
            }
            function player() {
                this.x = w/2;
                this.y = h/2;
                this.show = function() {
                    fill(color('green'));
                    rect(this.x,this.y,50,50);
                    rectMode(CENTER);
                }
                this.update = function() {
                if (keyIsDown(87)) {
                    this.y = this.y -= 15;
                }
                 if (keyIsDown(83)) {
                    this.y = this.y += 15;
                }
                if (keyIsDown(65)) {
                    this.x = this.x -= 15;
                }
                if (keyIsDown(68)) {
                    this.x = this.x += 15;
                }


                if (this.y < 28) {
                    this.y = 28
                }
                
                if (this.y > h-90) {
                    this.y = h-90

                }

                if (this.x < 28) {
                    this.x = 28
                }
                
                if (this.x > w-28) {
                     this.x = w-28

                }
                }   
            }

            function player1() {
                this.x = w/2;
                this.y = h/2;
                this.show = function() {
                    fill(color('green'));
                    rect(this.x,this.y,50,50);
                    rectMode(CENTER);
                }
                this.update = function() {
                if (keyIsDown(87)) {
                    this.y = this.y -= 15;
                }
                 if (keyIsDown(83)) {
                    this.y = this.y += 15;
                }
                if (keyIsDown(65)) {
                    this.x = this.x -= 15;
                }
                if (keyIsDown(68)) {
                    this.x = this.x += 15;
                }


                if (this.y < 28) {
                    this.y = 28
                }
                
                if (this.y > h-90) {
                    this.y = h-90

                }

                if (this.x < 28) {
                    this.x = 28
                }
                
                if (this.x > w-28) {
                     this.x = w-28

                }
                hit = collideRectRect(player1.x,player1.y,50,50,badguy.x,badguy.y,150,150);
                if (hit == true) {
                    location.href = "losepage.html";
                }
                hit1 = collideRectRect(player1.x,player1.y,50,50,badguy1.x,badguy1.y,150,150);
                if (hit1 == true) {
                    location.href = "losepage.html";
                }
                }  
            }
            function badguy() {
                this.x = w/4;
                this.y = h/2;
                this.show = function() {
                    fill(color('blue'));
                    rect(this.x,this.y,150,150);
                    rectMode(CENTER);
                    
                }
                this.update = function() {
                    if (millis() >= 100 + timer) {
                        this.x = this.x + random(-40,40);
                        this.y = this.y + random(-40,40);
                        timer = millis()

                    }
                    
                    if (this.y < 28) {
                    this.y = 28
                    }
                
                    if (this.y > h-90) {
                    this.y = h-90

                    }

                    if (this.x < 28) {
                    this.x = 28
                    }
                
                    if (this.x > w-28) {
                     this.x = w-28

                    }
                }
            }

            function badguy1() {
                this.x = 3*w/4;
                this.y = h/2;
                this.show = function() {
                    fill(color('red'));
                    rect(this.x,this.y,150,150);
                    rectMode(CENTER);
                }
                this.update = function() {
                    if (millis() >= 100 + timer1) {
                        this.x = this.x + random(-40,40);
                        this.y = this.y + random(-40,40);
                        timer1 = millis()

                    }

                    if (this.y < 28) {
                    this.y = 28
                    }
                
                    if (this.y > h-90) {
                    this.y = h-90

                    }

                    if (this.x < 28) {
                    this.x = 28
                    }
                
                    if (this.x > w-28) {
                     this.x = w-28

                    }
                }
            }
            function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            setInterval(function () {
                    minutes = parseInt(timer / 60, 10);
                    seconds = parseInt(timer % 60, 10);

                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;

                    display.textContent = minutes + ":" + seconds;

                    if (--timer < 0) {
                        location.href = "winpage.html";
                    }
                }, 1000);
            }

            window.onload = function () {
            var Minutes = 60 * 1,
                display = document.querySelector('#time');
                startTimer(Minutes, display);
            };
        </script>
    </body>
</html>